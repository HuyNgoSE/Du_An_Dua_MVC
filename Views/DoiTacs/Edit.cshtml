@model Du_An_Dua_MVC.Models.DoiTac

@{
    ViewData["Title"] = "Sửa Đổi";
}

<h1>Chỉnh Sửa Thông Tin</h1>

<h4>Cập Nhật Dữ Diệu Đối Tác</h4>
<hr />
<div class="row">
    <div class="col-md-4">

        @* 👇 1. GỬI VỀ ĐÂU?
           asp-action="Edit": Khi bấm nút Lưu, nó sẽ gửi dữ liệu về hàm Edit (Post) để xử lý cập nhật. *@
        <form asp-action="Edit">

            <div asp-validation-summary="ModelOnly" class="text-danger"></div>

            @* ⚠️ 2. CÁI MỎ NEO (Hidden Input) - QUAN TRỌNG NHẤT:
               Dòng này KHÔNG hiện ra màn hình, nhưng nó âm thầm giữ cái ID (VD: ID=5).
               Tại sao cần?
               - Nếu không gửi ID về, Server sẽ ngơ ngác: "Mày đưa tên mới, nhưng tên này đắp vào thằng nào??".
               - Thiếu dòng này -> Code sửa bị lỗi hoặc không chạy. *@
            <input type="hidden" asp-for="Id" />

            @* --- Ô SỬA TÊN --- *@
            <div class="form-group mb-3">
                <label asp-for="TenDoiTac" class="control-label">Tên Đối Tác</label>

                @* 👇 3. TỰ ĐỘNG ĐIỀN (Auto-fill):
                   Khác với trang Tạo Mới (trống trơn), ở trang này asp-for sẽ tự động
                   lôi tên cũ từ Database điền sẵn vào ô này cho em sửa. *@
                <input asp-for="TenDoiTac" class="form-control" />
                <span asp-validation-for="TenDoiTac" class="text-danger"></span>
            </div>

            @* --- Ô SỬA SỐ ĐIỆN THOẠI --- *@
            <div class="form-group mb-3">
                <label asp-for="SoDienThoai" class="control-label">Số Điện Thoại</label>
                <input asp-for="SoDienThoai" class="form-control" />
                <span asp-validation-for="SoDienThoai" class="text-danger"></span>
            </div>

            @* --- Ô SỬA VAI TRÒ --- *@
            <div class="form-group mb-3">
                <label asp-for="LoaiDoiTac" class="control-label">Phân Loại Đối Tác</label>

                @* 👇 4. TỰ ĐỘNG CHỌN (Auto-select):
                   Nó cũng thông minh tự chọn đúng vai trò cũ (VD: Đang là Người Bán thì nó chọn sẵn Người Bán). *@
                <select asp-for="LoaiDoiTac" class="form-control">
                    <option value="Người Bán">Người Bán (Nông Dân)</option>
                    <option value="Khách Mua">Khách Mua (Thương Lái)</option>
                </select>
                <span asp-validation-for="LoaiDoiTac" class="text-danger"></span>
            </div>

            <div class="form-group mt-3">
                <input type="submit" value="Lưu Thay Đổi" class="btn btn-warning" />
            </div>
        </form>
    </div>
</div>

<div class="mt-3">
    <a asp-action="Index" class="btn btn-secondary">Quay Lại Danh Sách</a>
</div>

@section Scripts {
    @{
        @* 👇 5. BẢO VỆ (Client Validation): Vẫn cần thiết để tránh xóa trắng dữ liệu rồi bấm Lưu. *@
        await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
}